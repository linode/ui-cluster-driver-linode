<section class="horizontal-form">
  {{#accordion-list showExpandAll=false as |al expandFn|}}
    mode:
    {{mode}}
    <br />
    step:
    {{step}}
    {{#if (eq step 1)}}
      {{#accordion-list-item
        title=accessConfigTitle
        detail=accessConfigDetail
        expandAll=expandAll
        expand=(action expandFn)
        expandOnInit=true
      }}
        <div class="row">
          <div class="col span-12">
            <label class="acc-label">
              {{t "clusterNew.linode.accessToken.label"}}
              {{field-required}}
            </label>
            {{#input-or-display
              editable=true
              value=cluster.linodeEngineConfig.accessToken
            }}
              {{input
                type="password"
                name="accessToken"
                classNames="form-control"
                placeholder=(t "clusterNew.linode.accessToken.placeholder")
                value=cluster.linodeEngineConfig.accessToken
              }}
            {{/input-or-display}}
            {{cluster.linodeEngineConfig.accessToken}}
          </div>
        </div>
      {{/accordion-list-item}}
      {{top-errors errors=errors}}
      {{save-cancel
        btnLabel="clusterNew.linode.accessConfig.next"
        savingLabel="clusterNew.linode.accessConfig.loading"
        save="verifyAccessToken"
        cancel=close
      }}
    {{else if (eq step 2)}}
      {{#accordion-list-item
        title=clusterConfigTitle
        detail=clusterConfigDetail
        expandAll=expandAll
        expand=(action expandFn)
        expandOnInit=true
      }}
        {{#if (eq mode "new")}}
          <div class="row">
            <div class="col span-6">
              <label class="acc-label">
                {{t "clusterNew.linode.region.label"}}
                {{field-required}}
              </label>
              {{#input-or-display
                editable=true
                value=cluster.linodeEngineConfig.region
              }}
                {{new-select
                  class="form-control"
                  content=regionChoises
                  value=cluster.linodeEngineConfig.region
                }}
              {{/input-or-display}}
              {{cluster.linodeEngineConfig.region}}
            </div>
            <div class="col span-6">
              <label class="acc-label">
                {{t "clusterNew.linode.kubernetesVersion.label"}}
                {{field-required}}
              </label>
              {{#input-or-display
                editable=true
                value=cluster.linodeEngineConfig.kubernetesVersion
              }}
                {{new-select
                  class="form-control"
                  content=k8sVersionChoises
                  value=cluster.linodeEngineConfig.kubernetesVersion
                }}
              {{/input-or-display}}
              {{cluster.linodeEngineConfig.kubernetesVersion}}
            </div>
          </div>
        {{/if}}
        <div class="row">
          <div class="header mt-20 clearfix">
            <div class="pull-left">
              <h2 class="mb-0">
                {{t "clusterNew.linode.tags.label"}}
              </h2>
            </div>
          </div>
          <div class="col span-5">
            <label class="acc-label">
              {{t "clusterNew.linode.tags.newTag"}}
            </label>
            {{#input-or-display editable=true value=newTag}}
              {{input
                type="text"
                name="tags"
                classNames="form-control"
                placeholder=(t "clusterNew.linode.tags.placeholder")
                value=newTag
              }}
            {{/input-or-display}}
            {{newTag}}
          </div>
          <div class="col span-1">
            <button class="btn bg-primary btn-sm mt-30" {{action "addNewTag"}}>
              <i class="icon icon-plus"></i>
            </button>
          </div>
          <div class="col span-6">
            <div class="lke-tags">
              {{#each cluster.linodeEngineConfig.tags as |tag tagIdx|}}
                <!--     single tag start -->
                <div class="lke-tag bg-primary">
                  <span>
                    {{tag}}
                  </span>
                  <button
                    class="lke-delete bg-error"
                    {{action "deleteTag" tagIdx}}
                  >
                    <i class="icon icon-trash"></i>
                  </button>
                </div>
                <!--     single tag end  -->
              {{else}}
                No tags added
              {{/each}}
            </div>
          </div>
        </div>
      {{/accordion-list-item}}
      {{top-errors errors=errors}}
      {{save-cancel
        btnLabel="clusterNew.linode.clusterConfig.next"
        savingLabel="clusterNew.linode.clusterConfig.loading"
        save="verifyClusterConfig"
        cancel=close
      }}
    {{else if (eq step 3)}}
      {{#accordion-list-item
        title=nodePoolConfigTitle
        detail=nodePoolConfigDetail
        expandAll=expandAll
        expand=(action expandFn)
        expandOnInit=true
      }}
        {{! select node pool }}
        <div class="row">
          <div class="col span-4">
            <label class="acc-label">
              {{t "clusterNew.linode.selectedNodePoolType.label"}}
            </label>
            {{#input-or-display editable=true value=selectedNodePoolType}}
              {{new-select
                class="form-control"
                content=nodePoolChoises
                value=selectedNodePoolType
              }}
            {{/input-or-display}}
            {{selectedNodePoolType}}
          </div>
          <div class="col span-1">
            <div class="acc-label">
              Monthly:
            </div>
            $
            {{this.selectedNodePoolObj.price.monthly}}
          </div>
          <div class="col span-1">
            <div class="acc-label">
              Hourly:
            </div>
            $
            {{this.selectedNodePoolObj.price.hourly}}
          </div>
          <div class="col span-1">
            <div class="acc-label">
              RAM:
            </div>
            {{this.selectedNodePoolObj.memory}}
            MB
          </div>
          <div class="col span-1">
            <div class="acc-label">
              CPUs:
            </div>
            {{this.selectedNodePoolObj.vcpus}}
          </div>
          <div class="col span-1">
            <div class="acc-label">
              Storage:
            </div>
            {{this.selectedNodePoolObj.disk}}
            MB
          </div>
          <div class="col span-1">
            <div class="acc-label">
              Count:
            </div>
            <Input
              @type="number"
              @min="1"
              @value={{this.selectedNodePoolObj.count}}
            />
          </div>
          <div class="col span-1">
            <div class="acc-label">
              Actions
            </div>
            <button
              class="btn bg-primary icon-btn p-0"
              {{action "addSelectedNodePool"}}
            >
              <span class="darken">
                <i class="icon icon-plus text-small"></i>
              </span>
              <span>
                Add Node Pool
              </span>
            </button>
          </div>
        </div>
        {{! select node pool end }}
        {{! show selected node pools }}
        <div class="ember-view">
          <div class="header mt-20 clearfix">
            <div class="pull-left">
              <h2 class="mb-0">
                {{t "clusterNew.linode.nodePools.label"}}
              </h2>
            </div>
          </div>
          <div class="grid sortable-table ember-view">
            <table class="fixed grid sortable-table">
              <thead>
                <tr class="fixed-header">
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      Label
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      Monthly $
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      Hourly $
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      RAM (MB)
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      CPUs
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      Storage (MB)
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent">
                      Count
                    </a>
                  </th>
                  <th lass="sortable ember-view" role="columnheader">
                    <a class="btn bg-transparent"></a>
                  </th>
                </tr>
              </thead>
              <tbody>
                {{#each this.selectedNodePoolList as |selectedNodePool|}}
                  <tr class="main-row ember-view">
                    <td>
                      {{selectedNodePool.label}}
                    </td>
                    <td>
                      {{selectedNodePool.price.monthly}}
                    </td>
                    <td>
                      {{selectedNodePool.price.hourly}}
                    </td>
                    <td>
                      {{selectedNodePool.memory}}
                    </td>
                    <td>
                      {{selectedNodePool.vcpus}}
                    </td>
                    <td>
                      {{selectedNodePool.disk}}
                    </td>
                    <td>
                      <Input
                        @type="number"
                        @min="1"
                        @value={{selectedNodePool.count}}
                      />
                    </td>
                    <td class="text-center">
                      <button
                        class="btn bg-error btn-sm"
                        {{action "deleteNodePool" selectedNodePool.id}}
                      >
                        <i class="icon icon-trash"></i>
                      </button>
                    </td>
                  </tr>
                {{else}}
                  <tr class="main-row ember-view">
                    <td colspan="8" class="p-10 text-center">
                      {{t "clusterNew.linode.nodePools.empty"}}
                    </td>
                  </tr>
                {{/each}}
              </tbody>
            </table>
            {{cluster.linodeEngineConfig.nodePools}}
            <br />
            {{cluster.linodeEngineConfig.name}}
            <br />
            {{cluster.linodeEngineConfig.label}}
            <br />
            {{cluster.linodeEngineConfig.description}}
            <br />
            Tags:
            {{cluster.linodeEngineConfig.tags}}
          </div>
        </div>
        {{! show selected node pools end }}
      {{/accordion-list-item}}
      {{top-errors errors=errors}}
      {{#if (eq mode "edit")}}
        {{save-cancel
          btnLabel="clusterNew.linode.nodePoolConfig.update"
          savingLabel="clusterNew.linode.nodePoolConfig.loading"
          save="updateCluster"
          cancel=close
        }}
      {{else}}
        {{save-cancel
          btnLabel="clusterNew.linode.nodePoolConfig.next"
          savingLabel="clusterNew.linode.nodePoolConfig.loading"
          save="createCluster"
          cancel=close
        }}
      {{/if}}
    {{/if}}
  {{/accordion-list}}
  {{! This component shows errors produced by validate() in the component }}
  {{! This component shows the Create and Cancel buttons }}
  {{!-- {{save-cancel save="save" cancel=close}} --}}
</section>